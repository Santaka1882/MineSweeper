(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{13:function(e,t,i){},14:function(e,t,i){"use strict";i.r(t);var a=i(2),s=i(3),n=i(5),r=i(4),o=i(1),h=i.n(o),u=i(7),l=i.n(u),c=i(0),d=function(e){Object(n.a)(i,e);var t=Object(r.a)(i);function i(){return Object(a.a)(this,i),t.apply(this,arguments)}return Object(s.a)(i,[{key:"getValue",value:function(){var e=this.props.value;return e.isRevealed?e.isMine?"\ud83d\udca3":0===e.neighbour?null:e.neighbour:this.props.value.isFlagged?"\u2757":null}},{key:"render",value:function(){var e=this.props,t=e.value,i=e.onClick,a=e.cMenu,s="cell"+(t.isRevealed?"":" hidden")+(t.isMine?" isMine":"")+(t.isFlagged?" isFlag":"");return Object(c.jsx)("div",{className:s,onClick:i,onContextMenu:a,children:Object(c.jsx)("span",{children:this.getValue()})})}}]),i}(h.a.Component),p=function(e){Object(n.a)(i,e);var t=Object(r.a)(i);function i(){var e;Object(a.a)(this,i);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={boardData:e.initBoardData(e.props.height,e.props.width,e.props.mines),gameStatus:"Game in progress",mineCount:e.props.mines,mineProtect:!0},e}return Object(s.a)(i,[{key:"getMines",value:function(e){var t=[];return e.map((function(e){e.map((function(e){e.isMine&&t.push(e)}))})),t}},{key:"getFlags",value:function(e){var t=[];return e.map((function(e){e.map((function(e){e.isFlagged&&t.push(e)}))})),t}},{key:"getHidden",value:function(e){var t=[];return e.map((function(e){e.map((function(e){e.isRevealed||t.push(e)}))})),t}},{key:"resetFirstBomb",value:function(e,t){if(this.state.mineProtect){var i=this.state.boardData;if(i[e][t].isMine){i[e][t].isMine=!1;var a=this.getRandomNumber(this.props.width),s=this.getRandomNumber(this.props.height);i[a][s].isMine||i[a][s]===i[e][t]||(i[a][s].isMine=!0,i[a][s].isRevealed=!1,i=this.getNeighbours(i,this.props.height,this.props.width))}console.log(i),this.setState({boardData:i,mineProtect:!1}),this.handleCellClick(e,t)}}},{key:"getRandomNumber",value:function(e){return Math.floor(1e3*Math.random()+1)%e}},{key:"initBoardData",value:function(e,t,i){var a=this.createEmptyArray(e,t);return a=this.plantMines(a,e,t,i),a=this.getNeighbours(a,e,t)}},{key:"createEmptyArray",value:function(e,t){for(var i=[],a=0;a<e;a++){i.push([]);for(var s=0;s<t;s++)i[a][s]={x:a,y:s,isMine:!1,neighbour:0,isRevealed:!1,isEmpty:!1,isFlagged:!1}}return i}},{key:"plantMines",value:function(e,t,i,a){for(var s,n,r=0;r<a;)s=this.getRandomNumber(i),n=this.getRandomNumber(t),e[s][n].isMine||(e[s][n].isMine=!0,r++);return e}},{key:"getNeighbours",value:function(e,t,i){for(var a=this,s=e,n=0;n<t;n++)for(var r=0;r<i;r++)!0!==e[n][r].isMine&&function(){var t=0;a.traverseBoard(e[n][r].x,e[n][r].y,e).map((function(e){e.isMine&&t++})),0===t&&(s[n][r].isEmpty=!0),s[n][r].neighbour=t}();return s}},{key:"traverseBoard",value:function(e,t,i){var a=[];return e>0&&a.push(i[e-1][t]),e<this.props.height-1&&a.push(i[e+1][t]),t>0&&a.push(i[e][t-1]),t<this.props.width-1&&a.push(i[e][t+1]),e>0&&t>0&&a.push(i[e-1][t-1]),e>0&&t<this.props.width-1&&a.push(i[e-1][t+1]),e<this.props.height-1&&t<this.props.width-1&&a.push(i[e+1][t+1]),e<this.props.height-1&&t>0&&a.push(i[e+1][t-1]),a}},{key:"revealBoard",value:function(){var e=this.state.boardData;e.map((function(e){e.map((function(e){e.isRevealed=!0}))})),this.setState({boardData:e})}},{key:"revealEmpty",value:function(e,t,i){var a=this;return this.traverseBoard(e,t,i).map((function(e){e.isFlagged||e.isRevealed||!e.isEmpty&&e.isMine||(i[e.x][e.y].isRevealed=!0,e.isEmpty&&a.revealEmpty(e.x,e.y,i))})),i}},{key:"handleCellClick",value:function(e,t){if(this.state.boardData[e][t].isRevealed||this.state.boardData[e][t].isFlagged)return null;this.state.boardData[e][t].isMine&&this.state.mineProtect&&this.resetFirstBomb(e,t),this.state.boardData[e][t].isMine&&!this.state.mineProtect&&(this.setState({gameStatus:"You Lost."}),this.revealBoard());var i=this.state.boardData;i[e][t].isFlagged=!1,i[e][t].isRevealed=!0,i[e][t].isEmpty&&(i=this.revealEmpty(e,t,i)),this.getHidden(i).length===this.props.mines&&(this.setState({mineCount:0,gameStatus:"You Win."}),this.revealBoard()),this.setState({boardData:i,mineCount:this.props.mines-this.getFlags(i).length,mineProtect:!1})}},{key:"handleContextMenu",value:function(e,t,i){e.preventDefault();var a=this.state.boardData,s=this.state.mineCount;if(!a[t][i].isRevealed&&(this.getFlags(a).length!==this.props.mines||!1!==a[t][i].isFlagged)){if(a[t][i].isFlagged?(a[t][i].isFlagged=!1,s++):(a[t][i].isFlagged=!0,s--),0===s){var n=this.getMines(a),r=this.getFlags(a);JSON.stringify(n)===JSON.stringify(r)&&(this.setState({mineCount:0,gameStatus:"You Win."}),this.revealBoard())}this.setState({boardData:a,mineCount:s})}}},{key:"renderBoard",value:function(e){var t=this;return e.map((function(e){return e.map((function(i){return Object(c.jsxs)("div",{className:"cell-container",children:[Object(c.jsx)(d,{onClick:function(){return t.handleCellClick(i.x,i.y)},cMenu:function(e){return t.handleContextMenu(e,i.x,i.y)},value:i}),e[e.length-1]===i?Object(c.jsx)("div",{className:"clear"}):""]},i.x*e.length+i.y)}))}))}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"board",children:[Object(c.jsxs)("div",{className:"game-info",children:[Object(c.jsxs)("span",{className:"info",children:["Mines remaining: ",this.state.mineCount]}),Object(c.jsx)("h1",{className:"info",children:this.state.gameStatus})]}),Object(c.jsx)("div",{className:"cell-wrapper",children:this.renderBoard(this.state.boardData)})]})}}]),i}(h.a.Component),v=(i(13),function(e){Object(n.a)(i,e);var t=Object(r.a)(i);function i(){var e;Object(a.a)(this,i);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={height:8,width:8,mines:10},e}return Object(s.a)(i,[{key:"render",value:function(){var e=this.state,t=e.height,i=e.width,a=e.mines;return Object(c.jsx)("div",{className:"game",children:Object(c.jsx)(p,{height:t,width:i,mines:a})})}}]),i}(h.a.Component));l.a.render(Object(c.jsx)(v,{}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.510cb6a2.chunk.js.map